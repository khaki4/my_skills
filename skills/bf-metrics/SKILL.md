---
name: bf-metrics
description: sprint-status.yamlì˜ ë©”íŠ¸ë¦­ ë°ì´í„°ë¥¼ ë¶„ì„í•˜ì—¬ ëª¨ë¸ ë°°ë‹¹ ìµœì í™” ë° ë‚œì´ë„ ì¬íƒœê¹…ì„ ì œì•ˆí•œë‹¤. ì½ê¸° ì „ìš© ìŠ¤í‚¬ë¡œ, íŒŒì¼ ë³€ê²½ ì—†ì´ ëŒ€í™”ë¡œë§Œ ê²°ê³¼ë¥¼ ì¶œë ¥í•œë‹¤.
---

# Metrics Analysis

## Overview

ìŠ¤í”„ë¦°íŠ¸ ë©”íŠ¸ë¦­ì„ ì§‘ê³„Â·ë¶„ì„í•˜ì—¬ ëª¨ë¸ ë°°ë‹¹ ìµœì í™”ì™€ ë‚œì´ë„ ì¬íƒœê¹…ì„ **ì œì•ˆ**í•œë‹¤. ìë™ ì ìš©í•˜ì§€ ì•Šìœ¼ë©°, ì‚¬ëŒì´ íŒë‹¨í•œë‹¤.

## When to Use

- ì‚¬ìš©ìê°€ `/bf-metrics`ë¥¼ ì…ë ¥í–ˆì„ ë•Œ
- `/bf-archive-sprint` ì™„ë£Œ í›„ ì•ˆë‚´ì— ë”°ë¼ ì‹¤í–‰í•  ë•Œ
- ì—¬ëŸ¬ ìŠ¤í”„ë¦°íŠ¸ë¥¼ ê±°ì¹œ í›„ íŒ¨í„´ ë¶„ì„ì´ í•„ìš”í•  ë•Œ

## Prerequisites

- `docs/sprint-status.yaml` ë˜ëŠ” `docs/archive/SPRINT-*/sprint-status.yaml` ì¤‘ í•˜ë‚˜ ì´ìƒ ì¡´ì¬
- ë¶„ì„ ëŒ€ìƒ Storyì— ë©”íŠ¸ë¦­ í•„ë“œê°€ ê¸°ë¡ë˜ì–´ ìˆì–´ì•¼ í•¨ (ë ˆê±°ì‹œ StoryëŠ” ê±´ë„ˆëœ€)

## Instructions

### 1. ë°ì´í„° ìˆ˜ì§‘

a. í˜„ì¬ ìŠ¤í”„ë¦°íŠ¸ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•œë‹¤:
   - `docs/sprint-status.yaml` ì½ê¸°

b. ì•„ì¹´ì´ë¸Œëœ ìŠ¤í”„ë¦°íŠ¸ ë°ì´í„°ë¥¼ ìˆ˜ì§‘í•œë‹¤:
   - `docs/archive/SPRINT-*/sprint-status.yaml` íŒ¨í„´ìœ¼ë¡œ ëª¨ë“  ì•„ì¹´ì´ë¸Œ íŒŒì¼ ì½ê¸°

c. ë¶„ì„ ëŒ€ìƒ í•„í„°ë§:
   - `status: done`ì¸ Storyë§Œ ë¶„ì„ ëŒ€ìƒì— í¬í•¨
   - ë ˆê±°ì‹œ Story íŒì • ê¸°ì¤€: `model_used` **AND** `ralph_retries` YAML keyê°€ **ëª¨ë‘** ì¡´ì¬í•˜ì§€ ì•ŠëŠ” StoryëŠ” ë ˆê±°ì‹œë¡œ ê°„ì£¼í•˜ì—¬ ê±´ë„ˆëœ€. ë‘ í‚¤ ì¤‘ í•˜ë‚˜ë¼ë„ ì¡´ì¬í•˜ë©´ í˜„í–‰ í¬ë§·ìœ¼ë¡œ ì²˜ë¦¬í•œë‹¤. (`model_used: null`ì€ ë¯¸ì™„ë£Œ Storyì´ë¯€ë¡œ `status: done` ì¡°ê±´ì—ì„œ ì´ë¯¸ í•„í„°ë¨)
   - ê±´ë„ˆë›´ Story ìˆ˜ë¥¼ ê¸°ë¡í•˜ì—¬ ë¦¬í¬íŠ¸ì— í‘œì‹œ

### 2. ì§‘ê³„ í…Œì´ë¸” ìƒì„±

**(difficulty, model_used) í˜ì–´ë³„ë¡œ ë‹¤ìŒ ì§€í‘œë¥¼ ì§‘ê³„í•œë‹¤:**

| ì§€í‘œ | ê³„ì‚° ë°©ë²• |
|------|----------|
| story_count | í•´ë‹¹ í˜ì–´ì˜ Story ìˆ˜ |
| avg_ralph_retries | í‰ê·  ì¬ì‹œë„ íšŸìˆ˜ |
| avg_ralph_approaches | í‰ê·  ì ‘ê·¼ ì „í™˜ íšŸìˆ˜ |
| stuck_rate | `ralph_stuck: true` ë¹„ìœ¨ (%) |
| avg_review_blockers | í‰ê·  ğŸ”´ Blocker ê±´ìˆ˜ |
| avg_review_recommended | í‰ê·  ğŸŸ¡ Recommended ê±´ìˆ˜ |
| regression_rate | `is_regression: true` ë¹„ìœ¨ (%) |

### 3. ëª¨ë¸ ë°°ë‹¹ ìµœì í™” ì œì•ˆ

ì•„ë˜ ì„ê³„ê°’ì— í•´ë‹¹í•˜ëŠ” (difficulty, model_used) í˜ì–´ì— ëŒ€í•´ ì œì•ˆì„ ìƒì„±í•œë‹¤:

| ì¡°ê±´ | ì„ê³„ê°’ | ì œì•ˆ |
|------|--------|------|
| ë†’ì€ ë¸”ë¡œì»¤ | avg_review_blockers >= 2.0 | ë” ê°•í•œ ëª¨ë¸ ë°°ë‹¹ ì œì•ˆ (ì˜ˆ: sonnet â†’ opus-lead) |
| ë†’ì€ ì¬ì‹œë„ | avg_ralph_retries >= 3.0 | êµ¬í˜„ ëª¨ë¸ ì—…ê·¸ë ˆì´ë“œ ì œì•ˆ |
| ë†’ì€ stuck | stuck_rate >= 20% | Agent Teams ì „ëµ ì „í™˜ ì œì•ˆ (ì˜ˆ: ralph-loop â†’ opus-lead) |
| ë†’ì€ íšŒê·€ | regression_rate >= 25% | ë¦¬ë·° ëª¨ë¸ ê°•í™” ì œì•ˆ |

- ì„ê³„ê°’ì— í•´ë‹¹í•˜ì§€ ì•Šìœ¼ë©´ "í˜„ì¬ ëª¨ë¸ ë°°ë‹¹ ì ì •" ë©”ì‹œì§€ë¥¼ í‘œì‹œí•œë‹¤.
- ì œì•ˆì—ëŠ” í•´ë‹¹ ì¡°ê±´ì„ ì¶©ì¡±í•œ êµ¬ì²´ì  ìˆ˜ì¹˜ë¥¼ í•¨ê»˜ í‘œì‹œí•œë‹¤.

### 4. ë‚œì´ë„ ì¬íƒœê¹… ì œì•ˆ

ì™„ë£Œëœ ê°œë³„ Storyì˜ ë©”íŠ¸ë¦­ì„ ê¸°ì¤€ìœ¼ë¡œ ë‚œì´ë„ ì¡°ì •ì„ ì œì•ˆí•œë‹¤:

**ê³¼ì†Œí‰ê°€ (ìƒí–¥ ì œì•ˆ):**

| í˜„ì¬ â†’ ì œì•ˆ | ì¡°ê±´ |
|------------|------|
| S â†’ M | ralph_retries >= 3 OR review_blockers >= 2 OR ralph_stuck == true |
| M â†’ L | ralph_retries >= 4 OR review_blockers >= 3 OR ralph_approaches >= 2 |
| L â†’ XL | ralph_stuck == true AND ralph_approaches >= 3 |

**ê³¼ëŒ€í‰ê°€ (í•˜í–¥ ì œì•ˆ):**

| í˜„ì¬ â†’ ì œì•ˆ | ì¡°ê±´ |
|------------|------|
| M â†’ S | ralph_retries == 0 AND review_blockers == 0 AND review_recommended <= 1 |
| L â†’ M | ralph_retries <= 1 AND review_blockers == 0 |
| XL â†’ L | ralph_retries <= 1 AND review_blockers == 0 AND ralph_approaches == 0 |

- í•´ë‹¹ Story IDì™€ í•¨ê»˜ êµ¬ì²´ì  ë©”íŠ¸ë¦­ ìˆ˜ì¹˜ë¥¼ í‘œì‹œí•œë‹¤.
- ì œì•ˆì´ ì—†ìœ¼ë©´ "ë‚œì´ë„ íƒœê¹… ì ì •" ë©”ì‹œì§€ë¥¼ í‘œì‹œí•œë‹¤.

### 5. E2E ì‹¤íŒ¨ íŒ¨í„´ ë¶„ì„

`failure_tag`ë³„ë¡œ ê±´ìˆ˜ì™€ ë¹„ìœ¨ì„ ì§‘ê³„í•œë‹¤:

| failure_tag | ê±´ìˆ˜ | ë¹„ìœ¨ |
|------------|------|------|
| spec-gap | N | N% |
| impl-bug | N | N% |
| test-design | N | N% |
| convention-violation | N | N% |
| integration | N | N% |

- regression Storyê°€ ì—†ìœ¼ë©´ "E2E íšŒê·€ ì—†ìŒ" ë©”ì‹œì§€ë¥¼ í‘œì‹œí•œë‹¤.
- íŠ¹ì • íƒœê·¸ê°€ 50% ì´ìƒì´ë©´ í•´ë‹¹ ì˜ì—­ ì§‘ì¤‘ ê°œì„  ì œì•ˆì„ ì¶”ê°€í•œë‹¤.

### 6. ì¢…í•© ìš”ì•½

ìœ„ ë¶„ì„ ê²°ê³¼ë¥¼ ì¢…í•©í•˜ì—¬ ìš°ì„ ìˆœìœ„ë³„ ì•¡ì…˜ ì•„ì´í…œì„ ì •ë¦¬í•œë‹¤:
- ğŸ”´ ì¦‰ì‹œ ì¡°ì¹˜: ë†’ì€ stuck_rate, ë†’ì€ ë¸”ë¡œì»¤ ë“± ì‹¬ê°í•œ íŒ¨í„´
- ğŸŸ¡ ê²€í†  ê¶Œì¥: ê³¼ì†Œ/ê³¼ëŒ€í‰ê°€ëœ ë‚œì´ë„, ëª¨ë¸ ìµœì í™” ê¸°íšŒ
- ğŸŸ¢ ì–‘í˜¸: ì„ê³„ê°’ ë‚´ ì •ìƒ ë²”ìœ„

## Output Format

ëŒ€í™”ë¡œë§Œ ì¶œë ¥í•œë‹¤ (íŒŒì¼ ì €ì¥ ì—†ìŒ, read-only ìŠ¤í‚¬).

```
## ğŸ“Š BF Workflow Metrics Report

### ë¶„ì„ ë²”ìœ„
- ìŠ¤í”„ë¦°íŠ¸: {ìˆ˜ì§‘ëœ ìŠ¤í”„ë¦°íŠ¸ ëª©ë¡}
- ë¶„ì„ ëŒ€ìƒ: {N}ê°œ Story (ë ˆê±°ì‹œ {M}ê°œ ì œì™¸)

### 1. (Difficulty, Model) í˜ì–´ë³„ ì§‘ê³„
{ì§‘ê³„ í…Œì´ë¸”}

### 2. ëª¨ë¸ ë°°ë‹¹ ìµœì í™” ì œì•ˆ
{ì œì•ˆ ëª©ë¡ ë˜ëŠ” "í˜„ì¬ ëª¨ë¸ ë°°ë‹¹ ì ì •"}

### 3. ë‚œì´ë„ ì¬íƒœê¹… ì œì•ˆ
{ê³¼ì†Œ/ê³¼ëŒ€í‰ê°€ ì œì•ˆ ëª©ë¡ ë˜ëŠ” "ë‚œì´ë„ íƒœê¹… ì ì •"}

### 4. E2E ì‹¤íŒ¨ íŒ¨í„´
{failure_tag ì§‘ê³„ í…Œì´ë¸” ë˜ëŠ” "E2E íšŒê·€ ì—†ìŒ"}

### 5. ì¢…í•© ì•¡ì…˜ ì•„ì´í…œ
ğŸ”´ ì¦‰ì‹œ ì¡°ì¹˜: ...
ğŸŸ¡ ê²€í†  ê¶Œì¥: ...
ğŸŸ¢ ì–‘í˜¸: ...
```
